<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ€ãƒ¼ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: #569cd6;
            border-bottom: 2px solid #569cd6;
            padding-bottom: 10px;
        }
        button {
            background: #569cd6;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 4px;
            margin-right: 10px;
        }
        button:hover {
            background: #4b8cc4;
        }
        #output {
            background: #2d2d30;
            border: 1px solid #3e3e42;
            padding: 20px;
            margin-top: 20px;
            border-radius: 4px;
            min-height: 400px;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.6;
            overflow-x: auto;
        }
        .success {
            color: #4ec9b0;
        }
        .error {
            color: #f48771;
        }
        .warning {
            color: #dcdcaa;
        }
        .info {
            color: #9cdcfe;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ€ãƒ¼ãƒ†ã‚¹ãƒˆ</h1>
        
        <div>
            <button id="runTest">ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
            <button id="clearOutput">å‡ºåŠ›ã‚¯ãƒªã‚¢</button>
        </div>
        
        <div id="output">
            ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ã€Œãƒ†ã‚¹ãƒˆå®Ÿè¡Œã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚
        </div>
    </div>

    <script type="module">
        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£
        const output = document.getElementById('output');
        let outputBuffer = [];
        
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        const originalTime = console.time;
        const originalTimeEnd = console.timeEnd;
        
        const timeMap = new Map();
        
        function appendOutput(text, className = '') {
            const span = document.createElement('span');
            span.textContent = text + '\n';
            if (className) {
                span.className = className;
            }
            output.appendChild(span);
            output.scrollTop = output.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            const text = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : arg
            ).join(' ');
            
            if (text.includes('âœ“')) {
                appendOutput(text, 'success');
            } else if (text.includes('âœ…')) {
                appendOutput(text, 'success');
            } else if (text.includes('ã€')) {
                appendOutput(text, 'info');
            } else {
                appendOutput(text);
            }
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            const text = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : arg
            ).join(' ');
            appendOutput(text, 'error');
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            const text = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : arg
            ).join(' ');
            appendOutput(text, 'warning');
        };
        
        console.time = function(label) {
            timeMap.set(label, performance.now());
        };
        
        console.timeEnd = function(label) {
            const start = timeMap.get(label);
            if (start) {
                const duration = performance.now() - start;
                appendOutput(`${label}: ${duration.toFixed(2)}ms`, 'info');
                timeMap.delete(label);
            }
        };
        
        // ãƒ†ã‚¹ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å‹•çš„ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
        async function runTest() {
            output.innerHTML = '';
            appendOutput('ãƒ†ã‚¹ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’èª­ã¿è¾¼ã¿ä¸­...', 'info');
            
            try {
                const module = await import('/src/lib/data/test-loader.ts');
                await module.testDataLoader();
            } catch (error) {
                console.error('ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¨ãƒ©ãƒ¼:', error);
            }
        }
        
        document.getElementById('runTest').addEventListener('click', runTest);
        
        document.getElementById('clearOutput').addEventListener('click', () => {
            output.innerHTML = 'ã‚¯ãƒªã‚¢ã•ã‚Œã¾ã—ãŸã€‚';
        });
    </script>
</body>
</html>